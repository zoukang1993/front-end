!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WeexJSRuntime=t()}(this,function(){"use strict";function e(e,t,n){return`${t}@${n}#${e}`}class t{constructor(e){this.instanceId=String(e),this.lastCallbackId=0,this.callbacks={},this.hooks={}}add(e){return this.lastCallbackId++,this.callbacks[this.lastCallbackId]=e,this.lastCallbackId}remove(e){const t=this.callbacks[e];return delete this.callbacks[e],t}registerHook(t,n,r,o){const s=e(t,n,r);this.hooks[s]&&console.warn(`[JS Framework] Override an existing component hook "${s}".`),this.hooks[s]=o}triggerHook(t,n,r,o){const s=e(t,n,r),i=this.hooks[s];if("function"!=typeof i)return console.error(`[JS Framework] Invalid hook function type (${typeof i}) on "${s}".`),null;let c=null;try{c=i.apply(null,o||[])}catch(e){console.error(`[JS Framework] Failed to execute the hook function on "${s}".`)}return c}consume(e,t,n){const r=this.callbacks[e];return void 0!==n&&!1!==n||delete this.callbacks[e],"function"==typeof r?r(t):new Error(`invalid callback id "${e}"`)}close(){this.callbacks={},this.hooks={}}}let n=1;function r(){return(n++).toString()}function o(e){const t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function s(e){if("function"!=typeof btoa)return"";const t=Array.prototype.map.call(new Uint8Array(e),e=>String.fromCharCode(e)).join("");return btoa(t)}function i(e){if(!e||"object"!=typeof e)return!0;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}const c={};function a(e){return c[e]}function l(e){const t=c[e];return t&&t.taskCenter?t.taskCenter:null}function d(e,t,n){const{documentElement:r}=e;if(r.pureChildren.length>0||t.parentNode)return;const o=r.children,s=o.indexOf(n);s<0?o.push(t):o.splice(s,0,t),1===t.nodeType?("body"===t.role?(t.docId=e.id,t.ownerDocument=e,t.parentNode=r,u(t,r)):(t.children.forEach(e=>{e.parentNode=t}),h(e,t),t.docId=e.id,t.ownerDocument=e,u(t,r),delete e.nodeMap[t.nodeId]),r.pureChildren.push(t),function(e,t){const n=t.toJSON();e&&e.taskCenter&&"function"==typeof e.taskCenter.send&&e.taskCenter.send("dom",{action:"createBody"},[n])}(e,t)):(t.parentNode=r,e.nodeMap[t.ref]=t)}function h(e,t){t.role="body",t.depth=1,delete e.nodeMap[t.nodeId],t.ref="_root",e.nodeMap._root=t,e.body=t}function u(e,t){e.parentNode=t,t.docId&&(e.docId=t.docId,e.ownerDocument=t.ownerDocument,e.ownerDocument.nodeMap[e.nodeId]=e,e.depth=t.depth+1),e.children.forEach(t=>{u(t,e)})}function f(e){for(;e;){if(1===e.nodeType)return e;e=e.nextSibling}}function p(e){for(;e;){if(1===e.nodeType)return e;e=e.previousSibling}}function m(e,t,n,r){n<0&&(n=0);const o=t[n-1],s=t[n];return t.splice(n,0,e),r&&(o&&(o.nextSibling=e),e.previousSibling=o,e.nextSibling=s,s&&(s.previousSibling=e)),n}function y(e,t,n,r){const o=t.indexOf(e);if(o<0)return-1;if(r){const e=t[o-1],n=t[o+1];e&&(e.nextSibling=n),n&&(n.previousSibling=e)}t.splice(o,1);let s=n;o<=n&&(s=n-1);const i=t[s-1],c=t[s];return t.splice(s,0,e),r&&(i&&(i.nextSibling=e),e.previousSibling=i,e.nextSibling=c,c&&(c.previousSibling=e)),o===s?-1:n}function g(e,t,n){const r=t.indexOf(e);if(!(r<0)){if(n){const e=t[r-1],n=t[r+1];e&&(e.nextSibling=n),n&&(n.previousSibling=e)}t.splice(r,1)}}class b{constructor(){this.nodeId=r(),this.ref=this.nodeId,this.children=[],this.pureChildren=[],this.parentNode=null,this.nextSibling=null,this.previousSibling=null}destroy(){const e=a(this.docId);e&&(delete this.docId,delete e.nodeMap[this.nodeId]),this.children.forEach(e=>{e.destroy()})}}let v;const S={};const k="div",E=["click","longpress","touchstart","touchmove","touchend","panstart","panmove","panend","horizontalpan","verticalpan","swipe"];function I(e,t){a(e).nodeMap[t.nodeId]=t}class w extends b{constructor(e=k,t,n){super();const o=function(e){return S[e]}(e);if(o&&!n)return new o(e,t,!0);t=t||{},this.nodeType=1,this.nodeId=r(),this.ref=this.nodeId,this.type=e,this.attr=t.attr||{},this.style=t.style||{},this.classStyle=t.classStyle||{},this.classList=t.classList||[],this.event={},this.children=[],this.pureChildren=[]}appendChild(e){if(!e.parentNode||e.parentNode===this)if(e.parentNode){if(y(e,this.children,this.children.length,!0),1===e.nodeType){const t=y(e,this.pureChildren,this.pureChildren.length),n=l(this.docId);if(n&&t>=0)return n.send("dom",{action:"moveElement"},[e.ref,this.ref,t])}}else if(u(e,this),m(e,this.children,this.children.length,!0),this.docId&&I(this.docId,e),1===e.nodeType){m(e,this.pureChildren,this.pureChildren.length);const t=l(this.docId);if(t)return t.send("dom",{action:"addElement"},[this.ref,e.toJSON(),-1])}}insertBefore(e,t){if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t))if(e.parentNode){if(y(e,this.children,this.children.indexOf(t),!0),1===e.nodeType){const n=f(t),r=y(e,this.pureChildren,n?this.pureChildren.indexOf(n):this.pureChildren.length),o=l(this.docId);if(o&&r>=0)return o.send("dom",{action:"moveElement"},[e.ref,this.ref,r])}}else if(u(e,this),m(e,this.children,this.children.indexOf(t),!0),this.docId&&I(this.docId,e),1===e.nodeType){const n=f(t),r=m(e,this.pureChildren,n?this.pureChildren.indexOf(n):this.pureChildren.length),o=l(this.docId);if(o)return o.send("dom",{action:"addElement"},[this.ref,e.toJSON(),r])}}insertAfter(e,t){if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t))if(e.parentNode){if(y(e,this.children,this.children.indexOf(t)+1,!0),1===e.nodeType){const n=y(e,this.pureChildren,this.pureChildren.indexOf(p(t))+1),r=l(this.docId);if(r&&n>=0)return r.send("dom",{action:"moveElement"},[e.ref,this.ref,n])}}else if(u(e,this),m(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&I(this.docId,e),1===e.nodeType){const n=m(e,this.pureChildren,this.pureChildren.indexOf(p(t))+1),r=l(this.docId);if(r)return r.send("dom",{action:"addElement"},[this.ref,e.toJSON(),n])}}removeChild(e,t){if(e.parentNode&&(g(e,this.children,!0),1===e.nodeType)){g(e,this.pureChildren);const t=l(this.docId);t&&t.send("dom",{action:"removeElement"},[e.ref])}t||e.destroy()}clear(){const e=l(this.docId);e&&this.pureChildren.forEach(t=>{e.send("dom",{action:"removeElement"},[t.ref])}),this.children.forEach(e=>{e.destroy()}),this.children.length=0,this.pureChildren.length=0}setAttr(e,t,n){if(this.attr[e]===t&&!1!==n)return;this.attr[e]=t;const r=l(this.docId);if(!n&&r){const n={};n[e]=t,r.send("dom",{action:"updateAttrs"},[this.ref,n])}}setAttrs(e,t){if(i(e))return;const n={};for(const r in e)this.attr[r]!==e[r]&&(this.attr[r]=e[r],n[r]=e[r]);if(!i(n)){const e=l(this.docId);!t&&e&&e.send("dom",{action:"updateAttrs"},[this.ref,n])}}setStyle(e,t,n){if(this.style[e]===t&&!1!==n)return;this.style[e]=t;const r=l(this.docId);if(!n&&r){const n={};n[e]=t,r.send("dom",{action:"updateStyle"},[this.ref,n])}}setStyles(e,t){if(i(e))return;const n={};for(const r in e)this.style[r]!==e[r]&&(this.style[r]=e[r],n[r]=e[r]);if(!i(n)){const e=l(this.docId);!t&&e&&e.send("dom",{action:"updateStyle"},[this.ref,n])}}setClassStyle(e){for(const n in this.classStyle)this.classStyle[n]="";Object.assign(this.classStyle,e);const t=l(this.docId);t&&t.send("dom",{action:"updateStyle"},[this.ref,this.toStyle()])}setClassList(e){const t="string"==typeof e?e.split(/\s+/):Array.from(e);if(Array.isArray(t)&&t.length>0){this.classList=t;const e=l(this.docId);e&&e.send("dom",{action:"updateClassList"},[this.ref,this.classList.slice()])}}addEvent(e,t,n){if(this.event||(this.event={}),!this.event[e]){this.event[e]={handler:t,params:n};const r=l(this.docId);r&&r.send("dom",{action:"addEvent"},[this.ref,e])}}removeEvent(e){if(this.event&&this.event[e]){delete this.event[e];const t=l(this.docId);t&&t.send("dom",{action:"removeEvent"},[this.ref,e])}}fireEvent(e,t,n,r){let o=null,s=!1;const i=this.event[e];if(i&&t){const e=i.handler;t.stopPropagation=(()=>{s=!0}),o=r&&r.params?e.call(this,...r.params,t):e.call(this,t)}return!s&&n&&-1!==E.indexOf(e)&&this.parentNode&&this.parentNode.fireEvent&&(t.currentTarget=this.parentNode,this.parentNode.fireEvent(e,t,n)),o}toStyle(){return Object.assign({},this.classStyle,this.style)}toJSON(){const e={ref:this.ref.toString(),type:this.type};i(this.attr)||(e.attr=this.attr),this.classList.length>0&&(e.classList=this.classList.slice());const t=this.toStyle();i(t)||(e.style=t);const n=[];for(const r in this.event){const{params:e}=this.event[r];e?n.push({type:r,params:e}):n.push(r)}return n.length&&(e.event=n),this.pureChildren.length&&(e.children=this.pureChildren.map(e=>e.toJSON())),e}toString(){return"<"+this.type+" attr="+JSON.stringify(this.attr)+" style="+JSON.stringify(this.toStyle())+">"+this.pureChildren.map(e=>e.toString()).join("")+"</"+this.type+">"}}v=w;let C=function(){};class O{constructor(e,n){Object.defineProperty(this,"instanceId",{enumerable:!0,value:String(e)}),Object.defineProperty(this,"callbackManager",{enumerable:!0,value:new t(e)}),C=n||function(){}}callback(e,t,n){return this.callbackManager.consume(e,t,n)}registerHook(...e){return this.callbackManager.registerHook(...e)}triggerHook(...e){return this.callbackManager.triggerHook(...e)}updateData(e,t,n){this.send("module",{module:"dom",method:"updateComponentData"},[e,t,n])}destroyCallback(){return this.callbackManager.close()}normalize(e){const t=o(e);return e&&e instanceof w?e.ref:e&&e._isVue&&e.$el instanceof w?e.$el.ref:"Function"===t?this.callbackManager.add(e).toString():function(e){const t=o(e);switch(t){case"Undefined":case"Null":return"";case"RegExp":return e.toString();case"Date":return e.toISOString();case"Number":case"String":case"Boolean":case"Array":case"Object":return e;case"ArrayBuffer":return{"@type":"binary",dataType:t,base64:s(e)};case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return{"@type":"binary",dataType:t,base64:s(e.buffer)};default:return JSON.stringify(e)}}(e)}send(e,t,n,r){const{action:o,component:s,ref:i,module:c,method:a}=t;switch(n=n.map(e=>this.normalize(e)),e){case"dom":return this[o](this.instanceId,n);case"component":return this.componentHandler(this.instanceId,i,a,n,Object.assign({component:s},r));default:return this.moduleHandler(this.instanceId,c,a,n,r)}}callDOM(e,t){return this[e](this.instanceId,t)}callComponent(e,t,n,r){return this.componentHandler(this.instanceId,e,t,n,r)}callModule(e,t,n,r){return this.moduleHandler(this.instanceId,e,t,n,r)}}function A(e,t){const n=a(e);return n?Array.isArray(t)?t.map(e=>{switch(e.method){case"callback":return function(e,t,n,r){return e.taskCenter.callback(t,n,r)}(n,...e.args);case"fireEventSync":case"fireEvent":return function(e,t,n,r,o,s){const i=e.getRef(t);return i?e.fireEvent(i,n,r,o,s):new Error(`invalid element reference "${t}"`)}(n,...e.args);case"componentHook":return function(e,t,n,r,o){if(!e||!e.taskCenter)return console.error('[JS Framework] Can\'t find "document" or "taskCenter".'),null;let s=null;try{s=e.taskCenter.triggerHook(t,n,r,o)}catch(e){console.error(`[JS Framework] Failed to trigger the "${n}@${r}" hook on ${t}.`)}return s}(n,...e.args)}}):void 0:new Error("[JS Framework] Failed to receiveTasks, "+`instance (${e}) is not available.`)}const x={};function F(e){for(const t in e)x[t]||(x[t]={}),e[t].forEach(e=>{"string"==typeof e?x[t][e]=!0:x[t][e.name]=e.args})}function N(e,t){return"string"==typeof t?!(!x[e]||!x[e][t]):!!x[e]}const J={};function j(e){Array.isArray(e)&&e.forEach(e=>{e&&("string"==typeof e?J[e]=!0:"object"==typeof e&&"string"==typeof e.type&&(J[e.type]=e,function(e,t){if(t&&t.length){class n extends v{}t.forEach(t=>{n.prototype[t]=function(...n){const r=l(this.docId);if(r)return r.send("component",{ref:this.ref,component:e,method:t},n)}}),S[e]=n}}(e.type,e.methods)))})}function $(e){return!!J[e]}const M=[];function T(e,t){D(e)?console.warn(`Service "${e}" has been registered already!`):(t=Object.assign({},t),M.push({name:e,options:t}))}function R(e){M.some((t,n)=>{if(t.name===e)return M.splice(n,1),!0})}function D(e){return function(e){return M.map(e=>e.name).indexOf(e)}(e)>=0}class L extends b{constructor(e){super(),this.nodeType=8,this.nodeId=r(),this.ref=this.nodeId,this.type="comment",this.value=e,this.children=[],this.pureChildren=[]}toString(){return"\x3c!-- "+this.value+" --\x3e"}}function P(e,t=[]){return{module:"dom",method:e,args:t}}class U{constructor(e,t){this.id=e,this.batched=!1,this.updates=[],"function"==typeof t?Object.defineProperty(this,"handler",{configurable:!0,enumerable:!0,writable:!0,value:t}):console.error("[JS Runtime] invalid parameter, handler must be a function")}createFinish(e){return(0,this.handler)([P("createFinish")],e)}updateFinish(e){return(0,this.handler)([P("updateFinish")],e)}refreshFinish(e){return(0,this.handler)([P("refreshFinish")],e)}createBody(e){const t=e.toJSON(),n=t.children;delete t.children;const r=[P("createBody",[t])];return n&&r.push.apply(r,n.map(e=>P("addElement",[t.ref,e,-1]))),this.addActions(r)}addElement(e,t,n){return n>=0||(n=-1),this.addActions(P("addElement",[t,e.toJSON(),n]))}removeElement(e){if(Array.isArray(e)){const t=e.map(e=>P("removeElement",[e]));return this.addActions(t)}return this.addActions(P("removeElement",[e]))}moveElement(e,t,n){return this.addActions(P("moveElement",[e,t,n]))}setAttr(e,t,n){const r={};return r[t]=n,this.addActions(P("updateAttrs",[e,r]))}setStyle(e,t,n){const r={};return r[t]=n,this.addActions(P("updateStyle",[e,r]))}setStyles(e,t){return this.addActions(P("updateStyle",[e,t]))}addEvent(e,t){return this.addActions(P("addEvent",[e,t]))}removeEvent(e,t){return this.addActions(P("removeEvent",[e,t]))}handler(e,t){return t&&t()}addActions(e){const t=this.updates,n=this.handler;if(Array.isArray(e)||(e=[e]),!this.batched)return n(e);t.push.apply(t,e)}}const z={createBody:"callCreateBody",addElement:"callAddElement",removeElement:"callRemoveElement",moveElement:"callMoveElement",updateAttrs:"callUpdateAttrs",updateStyle:"callUpdateStyle",addEvent:"callAddEvent",removeEvent:"callRemoveEvent"};function H(e,t,n){const{module:r,method:o,args:s}=t;return function(e,t){return"dom"===e&&z[t]&&"function"==typeof global[z[t]]}(r,o)?global[z[o]](e,...s,"-1"):n(e,[t],"-1")}class B{constructor(e,t,n){e=e?e.toString():"",this.id=e,this.URL=t,function(e,t){e&&(c[e]=t)}(e,this),this.nodeMap={};const r=B.Listener||U;this.listener=new r(e,n||function(e,t){const n=t||global.callNative;return"function"!=typeof n&&console.error("[JS Runtime] no default handler"),function(t){Array.isArray(t)||(t=[t]);for(let r=0;r<t.length;r++){const o=H(e,t[r],n);if(-1===o)return o}}}(e,B.handler)),this.taskCenter=new O(e,n?(e,...t)=>n(...t):B.handler),this.createDocumentElement()}getRef(e){return this.nodeMap[e]}open(){this.listener.batched=!1}close(){this.listener.batched=!0}createDocumentElement(){if(!this.documentElement){const e=new w("document");e.docId=this.id,e.ownerDocument=this,e.role="documentElement",e.depth=0,e.ref="_documentElement",this.nodeMap._documentElement=e,this.documentElement=e,Object.defineProperty(e,"appendChild",{configurable:!0,enumerable:!0,writable:!0,value:e=>{d(this,e)}}),Object.defineProperty(e,"insertBefore",{configurable:!0,enumerable:!0,writable:!0,value:(e,t)=>{d(this,e,t)}})}return this.documentElement}createBody(e,t){if(!this.body){h(this,new w(e,t))}return this.body}createElement(e,t){return new w(e,t)}createComment(e){return new L(e)}registerStyleSheets(e,t){const n=Array.isArray(t)?t:[t];if(this.taskCenter&&n.length)return this.taskCenter.send("dom",{action:"registerStyleSheets"},[e,n])}fireEvent(e,t,n,r,o){if(!e)return;(n=n||{}).type=n.type||t,n.target=e,n.currentTarget=e,n.timestamp=Date.now(),r&&function(e,t){const n=t.attrs||{};for(const o in n)e.setAttr(o,n[o],!0);const r=t.style||{};for(const o in r)e.setStyle(o,r[o],!0)}(e,r);const s="true"===this.getRef("_root").attr.bubble;return e.fireEvent(t,n,s,o)}destroy(){var e;this.taskCenter.destroyCallback(),delete this.listener,delete this.nodeMap,delete this.taskCenter,e=this.id,delete c[e]}}B.handler=null;const _={};function W(e,t,n){const r=l(e);return r&&"function"==typeof r.send?(...e)=>r.send("module",{module:t,method:n},e):(console.error(`[JS Framework] Failed to find taskCenter (${e}).`),null)}function V(e,t,n,r){const o=l(e);return o&&"function"==typeof o.send?"function"!=typeof r?(console.error(`[JS Framework] ${t}.${n} must be assigned as a function.`),null):e=>o.send("module",{module:t,method:n},[e]):(console.error(`[JS Framework] Failed to find taskCenter (${e}).`),null)}class q{constructor(e,t){!function(e,t){Object.defineProperty(e,"[[CurrentInstanceId]]",{value:t})}(this,String(e)),this.config=t||{},this.document=new B(e,this.config.bundleUrl),this.requireModule=this.requireModule.bind(this),this.isRegisteredModule=N,this.isRegisteredComponent=$}requireModule(e){const t=this["[[CurrentInstanceId]]"];if(!(t&&this.document&&this.document.taskCenter))return void console.error(`[JS Framework] Failed to requireModule("${e}"), `+`instance (${t}) doesn't exist anymore.`);if(!N(e))return void console.warn(`[JS Framework] using unregistered weex module "${e}"`);const n=`${e}#${t}`;if(!_[n]){const r=x[e],o={};for(const n in r)Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:()=>W(t,e,n),set:r=>V(t,e,n,r)});_[n]=o}return _[n]}supports(e){if("string"!=typeof e)return null;const t=e.match(/^@(\w+)\/(\w+)(\.(\w+))?$/i);if(t){const e=t[1],n=t[2],r=t[4];switch(e){case"module":return N(n,r);case"component":return $(n)}}return null}}let X,G;const K=/^\s*\/\/ *(\{[^}]*\}) *\r?\n/;function Y(){return"0.23.7"}const Q={};function Z(e){return Q[e]}function ee(e,t={},n){const r=new q(e,t);Object.freeze(r);const o=t.bundleType||"Vue";Q[e]=o;const s=G.frameworks[o];if(!s)return new Error(`[JS Framework] Invalid bundle type "${o}".`);!function(e,t,n){const r=l(e);if(!r||"function"!=typeof r.send)return void console.error("[JS Framework] Failed to create tracker!");if(!t||!n)return void console.warn(`[JS Framework] Invalid track type (${t}) or value (${n})`);const o=`jsfm.${t}.${n}`;try{if(N("userTrack","addPerfPoint")){const e=Object.create(null);e[o]="4",r.send("module",{module:"userTrack",method:"addPerfPoint"},[e])}}catch(e){console.error(`[JS Framework] Failed to trace "${o}"!`)}}(e,"bundleType",o);const i=function(e,t,n){const r=Object.create(null);return r.service=Object.create(null),M.forEach(({name:o,options:s})=>{const i=s.create;if(i)try{const s=i(e,t,n);Object.assign(r.service,s),Object.assign(r,s.instance)}catch(e){console.error(`[JS Runtime] Failed to create service ${o}.`)}}),delete r.service.instance,Object.freeze(r.service),r}(e,{weex:r,config:t,created:Date.now(),framework:o,bundleType:o},G);Object.freeze(i);const c=Object.create(null);Object.assign(c,i,{weex:r,getJSFMVersion:Y,__WEEX_CALL_JAVASCRIPT__:A,services:i}),Object.freeze(c);const a=Object.assign({},c);return"function"==typeof s.createInstanceContext&&Object.assign(a,s.createInstanceContext(e,c,n)),Object.freeze(a),a}const te={createInstance:function(e,t,n,r){if(Q[e])return new Error(`The instance id "${e}" has already been used!`);const o=function(e){const t=K.exec(e);if(t)try{return JSON.parse(t[1]).framework}catch(e){}return"Weex"}(t);Q[e]=o,(n=JSON.parse(JSON.stringify(n||{}))).env=JSON.parse(JSON.stringify(global.WXEnvironment||{})),n.bundleType=o;const s=G.frameworks[o];if(!s)return new Error(`[JS Framework] Invalid bundle type "${o}".`);"Weex"===o&&console.error('[JS Framework] COMPATIBILITY WARNING: Weex DSL 1.0 (.we) framework is no longer supported! It will be removed in the next version of WeexSDK, your page would be crash if you still using the ".we" framework. Please upgrade it to Vue.js or Rax.');const i=ee(e,n,r);if("function"==typeof s.createInstance){if("Rax"===o||"Weex"===o){const c=Object.assign({config:n,created:Date.now(),framework:o},i);return s.createInstance(e,t,n,r,c)}return s.createInstance(e,t,n,r,i)}!function(e,t){const n=[],r=[];for(const s in t)n.push(s),r.push(t[s]);const o=`\n    (function (global) {\n      ${e}\n    })(Object.create(this))\n  `;new Function(...n,o)(...r)}(t,i)},createInstanceContext:ee,getRoot:function(e){const t=a(e);try{if(t&&t.body)return t.body.toJSON()}catch(e){return void console.error("[JS Framework] Failed to get the virtual dom tree.")}},getJSFMVersion:Y,getDocument:a,registerService:T,unregisterService:R,callJS(e,t){const n=X[Z(e)];return n&&"function"==typeof n.receiveTasks?n.receiveTasks(e,t):A(e,t)}};function ne(e){te[e]=function(...t){const n=t[0],r=Z(n);if(r&&X[r]){const o=X[r][e](...t),s={framework:r};return"refreshInstance"===e?M.forEach(e=>{const t=e.options.refresh;t&&t(n,{info:s,runtime:G})}):"destroyInstance"===e&&(M.forEach(e=>{const t=e.options.destroy;t&&t(n,{info:s,runtime:G})}),delete Q[n]),o}return new Error("[JS Framework] Using invalid instance id "+`"${n}" when calling ${e}.`)}}function re(e,t){te[e]=function(...n){"function"==typeof t&&t(...n);for(const t in G.frameworks){const r=G.frameworks[t];r&&r[e]&&r[e](...n)}}}const oe={Document:B,Element:w,Comment:L,Listener:U,TaskCenter:O,sendTasks:(...e)=>"function"==typeof callNative?callNative(...e):(global.callNative||(()=>{}))(...e)};return B.handler=oe.sendTasks,{service:{register:T,unregister:R,has:D},freezePrototype:function(){Object.freeze(oe.Comment),Object.freeze(oe.Listener),Object.freeze(oe.Document.prototype),Object.freeze(oe.Comment.prototype),Object.freeze(oe.Listener.prototype)},init:function(e){X=(G=e||{}).frameworks||{},function(){const e={createFinish:global.callCreateFinish,updateFinish:global.callUpdateFinish,refreshFinish:global.callRefreshFinish,createBody:global.callCreateBody,registerStyleSheets:global.callRegisterStyleSheets,addElement:global.callAddElement,removeElement:global.callRemoveElement,moveElement:global.callMoveElement,updateAttrs:global.callUpdateAttrs,updateStyle:global.callUpdateStyle,updateClassList:global.callUpdateClassList,addEvent:global.callAddEvent,removeEvent:global.callRemoveEvent},t=O.prototype;for(const n in e){const r=e[n];t[n]=r?(e,t)=>r(e,...t):(e,t)=>C(e,[{module:"dom",method:n,args:t}],"-1")}t.componentHandler=global.callNativeComponent||((e,t,n,r,o)=>C(e,[{component:o.component,ref:t,method:n,args:r}])),t.moduleHandler=global.callNativeModule||((e,t,n,r)=>C(e,[{module:t,method:n,args:r}]))}();for(const t in X){const n=X[t];if("function"==typeof n.init)try{n.init(e)}catch(e){}}return re("registerComponents",j),re("registerModules",F),re("registerMethods"),["destroyInstance","refreshInstance"].forEach(ne),te},config:oe}});
//# sourceMappingURL=index.es6.min.js.map
